!function r(i,c,l){function s(t,e){if(!c[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var o=c[t]={exports:{}};i[t][0].call(o.exports,function(e){return s(i[t][1][e]||e)},o,o.exports,r,i,c,l)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkAvailability=function(t){return function(n){var e={action:"check_availability",_wpnonce:_townhub_add_ons.nonce,listing_id:_townhub_add_ons.post_id};return e=Object.assign({},t,e),n({type:a.CHECK_AVAILABILITY_START}),axios.post(_townhub_add_ons.url,Qs.stringify(e)).then(function(e){var t;null!=e.data.debug&&1==e.data.debug&&console.log(e.data),e.data.success&&n((t=e.data,{type:a.CHECK_AVAILABILITY_SUCCESS,data:t}))}).catch(function(e){console.log(e)})}};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("./actionTypes"))},{"./actionTypes":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.GET_ROOMS_SUCCESS="GET_ROOMS_SUCCESS",n.CHECK_AVAILABILITY_START="CHECK_AVAILABILITY_START",n.CHECK_AVAILABILITY_SUCCESS="CHECK_AVAILABILITY_SUCCESS"},{}],3:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../action/BookingActions")),y=c(e("./RoomSelected")),g=c(e("./CheckInOut")),k=c(e("./LoadingIndicator")),w=e("../utils/helpers");function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=ReactRedux.connect,u=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),n=null!=e.min_nights?e.min_nights:1,a=(0,w.getDate)(),o=(0,w.getDate)(null,n);return t.format="YYYY-MM-DD",t.bktype="rooms_old",t.price_based="per_night",t.min_nights=n,null!=t.props.format&&""!=t.props.format&&(t.format=t.props.format),null!=t.props.bktype&&""!=t.props.bktype&&(t.bktype=t.props.bktype),null!=t.props.price_based&&""!=t.props.price_based&&(t.price_based=t.props.price_based),t.state={adults:1,children:0,checkin:a,checkout:o,selected:[],selected_services:[],booked:[],bookable:!1,checkavailable:!0,checkingavai:!1,submit:!1},t.formRef=null,t.setFormRef=t.setFormRef.bind(t),t.checkAvailability=t.checkAvailability.bind(t),t.onSelectRoom=t.onSelectRoom.bind(t),t.getCheckInOut=t.getCheckInOut.bind(t),t.onChange=t.onChange.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t.onChangeRoomQtt=t.onChangeRoomQtt.bind(t),t.onSubmit=t.onSubmit.bind(t),t.onClickSubmit=t.onClickSubmit.bind(t),t.handleChange=t.handleChange.bind(t),t.handleClick=t.handleClick.bind(t),t.handleAvaiCalEvent=t.handleAvaiCalEvent.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,React.Component),o(r,[{key:"componentDidMount",value:function(){window.addEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"handleAvaiCalEvent",value:function(e){if(null!=e.detail){var t=e.detail,n=t.vals;t.metas;null!=n&&Array.isArray(n)&&2==n.length&&this.setState({checkin:this._formatOutDate(n[0]),checkout:this._formatOutDate(n[1]),checkavailable:!0,booked:[],bookable:!1})}}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",o="";return null!=e&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),o=e.substr(6,2),1==t?n+"-"+a+"-"+o:this.format.replace("YYYY",n).replace("MM",a).replace("DD",o)):""}},{key:"_renderCusHtml",value:function(){var e=document.getElementById("tmpl-custom-get-field").innerHTML;return""!=e&&React.createElement("div",{className:"cus-field-bk-content",dangerouslySetInnerHTML:{__html:e}})}},{key:"setFormRef",value:function(e){this.formRef=e}},{key:"checkAvailability",value:function(e){this.setState({bookable:!1,checkavailable:!1,checkingavai:!0}),this.props.checkAvailability(this.state)}},{key:"onChange",value:function(e,t){var n;this.setState((l(n={},t,e.target.value),l(n,"checkavailable",!0),n))}},{key:"handleChange",value:function(t,e){var n=e.target.value,a=this.state.selected_services,o=a.findIndex(function(e){return e.id==t});-1!==o?a.splice(o,1):a.push({id:t,price:n,qtt:1}),this.setState({selected_services:a})}},{key:"handleClick",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"getCheckInOut",value:function(e){Array.isArray(e)&&2==e.length&&this.setState({checkin:e[0],checkout:e[1],checkavailable:!0})}},{key:"onClickQtt",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",n=arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e3,r=this.state[n];"down"==t&&a<r?--r:"up"==t&&r<o&&++r,this.setState((l(e={},n,r),l(e,"checkavailable",!0),e))}},{key:"onChangeRoomQtt",value:function(e,t,n){var a=this.state,o=a.booked,r=a.bookable;if(Array.isArray(o)){var i=o.findIndex(function(e){return e.id==t}),c=n.min_adults;(null==c||c<0)&&(c=1),-1!==i?0<e&&c<=e?o[i]={id:t,qtt:e}:o.splice(i,1):0<e&&c<=e&&o.push({id:t,qtt:e}),r=0<o.length}this.setState({booked:o,bookable:r})}},{key:"onSelectRoom",value:function(e){var t=e.target.value,n=this.state.selected;-1===n.indexOf(t)&&this.setState({selected:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t])})}},{key:"onClickSubmit",value:function(e){this.setState({submit:!0,bookable:!1,checkavailable:!1})}},{key:"onSubmit",value:function(e){this.state.submit||e.preventDefault()}},{key:"componentDidUpdate",value:function(e,t){this.state.submit&&this.formRef.submit()}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state,n=t.checkin,a=t.checkout,o=0;if(""!=n&&""!=a){var r=new Date(n),i=new Date(a);o=Math.floor((i-r)/864e5),1==e&&++o}return o}},{key:"render",value:function(){var i=this,e=this.props.booking,l=e.rooms,t=e.available,n=e.services,a=this.state,c=a.booked,s=(a.selected,a.submit),o=a.bookable,r=a.checkavailable,u=a.checkingavai,d=a.selected_services,h=a.checkin,m=a.checkout,p=[],f=0,b=1;null!=l&&l.length&&(Array.isArray(t)&&t.length&&t.forEach(function(t,e){if(0<parseInt(t.quantities)){var n=l.find(function(e){return e.id==t.id}),a=c.find(function(e){return e.id==t.id}),o=0;null!=a&&(o=a.qtt);var r=Object.assign({},n);r=Object.assign(r,t,{available:!0,qtt:o}),p.push(React.createElement(y.default,{rOrder:b,key:e,room:r,changeRoomQtt:i.onChangeRoomQtt})),b++}}),0==p.length&&(p=React.createElement("div",null,"There is no available rooms. Please try with different days.")));var _=[];null!=n&&n.length&&n.forEach(function(t,e){var n=d.findIndex(function(e){return e.id==t.service_id});_.push(React.createElement("div",{key:e,className:"cth-dropdown-item lserv-dropdown"},React.createElement("input",{name:t.service_id,onChange:function(e){return i.handleChange(t.service_id,e)},type:"checkbox",value:t.service_price,defaultChecked:-1!==n,id:t.service_id}),React.createElement("label",{htmlFor:t.service_id},t.service_name,React.createElement("span",{className:"cth-dropdown-meta"},(0,w.price_format)(t.service_price)))))});var v=[];return Array.isArray(c)&&c.length&&(c.forEach(function(t,e){var n=l.find(function(e){return e.id==t.id}),a=n.price,o=n.dPrices,r=(0,w.get_float_price)(a);for(var i in o)if(o[i].iso!=m){var c=(0,w.get_float_price)(o[i].price);0<c?(f+=c*t.qtt,s&&v.push(React.createElement("input",{key:"price_"+i+"_"+t.id,type:"hidden",name:"rooms_old["+t.id+"]["+o[i].iso+"]",value:c,readOnly:!0}))):(f+=r*t.qtt,s&&v.push(React.createElement("input",{key:"price_"+i+"_"+t.id,type:"hidden",name:"rooms_old["+t.id+"]["+o[i].iso+"]",value:r,readOnly:!0})))}s&&v.push(React.createElement("input",{key:"qtt_"+e,type:"hidden",name:"rooms_old["+t.id+"][qtt]",value:t.qtt,readOnly:!0}))}),s&&(d.forEach(function(e,t){var n="addservices["+t+"]";v.push(React.createElement("input",{key:"addservices_"+t,type:"hidden",name:n,value:e.id,readOnly:!0}))}),v.push(React.createElement("input",{key:"product_id",type:"hidden",name:"product_id",value:_townhub_add_ons.post_id,readOnly:!0})),v.push(React.createElement("input",{key:"esb_add_to_cart",type:"hidden",name:"action",value:"esb_add_to_cart",readOnly:!0})),v.push(React.createElement("input",{key:"booking_type",type:"hidden",name:"booking_type",value:this.bktype,readOnly:!0})),v.push(React.createElement("input",{key:"price_based",type:"hidden",name:"price_based",value:this.price_based,readOnly:!0}))),null!=d&&d.length&&d.forEach(function(e,t){f+=parseFloat(e.price)*parseFloat(e.qtt)})),React.createElement("form",{method:"post",className:"book-formsss custom-formsss",onSubmit:this.onSubmit,ref:this.setFormRef},React.createElement("fieldset",null,React.createElement("div",{className:"cal-item checkin-out-inputs"},React.createElement(g.default,{fieldName:"checkinout",fieldValue:[h,m],field:{label:_townhub_add_ons.i18n.book_dates,icon:"fal fa-calendar-check",format:this.format},getCheckInOut:this.getCheckInOut,min_nights:this.min_nights}),React.createElement("input",{type:"hidden",name:"checkout",value:m,readOnly:!0}),React.createElement("input",{type:"hidden",name:"checkin",value:h,readOnly:!0})),React.createElement("div",{className:"cal-item guests-inputs"},React.createElement("div",{className:"qtt-item fl-wrap adults-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_ad),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"adults",min:"1",max:"10",step:"1",value:this.state.adults,onChange:function(e){return i.onChange(e,"adults")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return i.onClickQtt("up","adults",1,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return i.onClickQtt("down","adults",1,10)}},"-")))),React.createElement("div",{className:"qtt-item fl-wrap children-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_chi),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"children",min:"0",max:"10",step:"1",value:this.state.children,onChange:function(e){return i.onChange(e,"children")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return i.onClickQtt("up","children",0,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return i.onClickQtt("down","children",0,10)}},"-"))))),u?React.createElement(k.default,null):0<p.length&&React.createElement("div",{className:"cal-item available-rooms-services"},React.createElement("div",{className:"available-rooms"},React.createElement("label",null,_townhub_add_ons.i18n.book_avr),React.createElement("div",{className:"fl-wrap multiqtts-select-wrap rooms-items-wrap"},p)),0<n.length&&React.createElement("div",{className:"cth-dropdown-warp services-wrap"},React.createElement("div",{className:"cth-dropdown-header",onClick:this.handleClick},React.createElement("label",null,_townhub_add_ons.i18n.book_services,React.createElement("span",{className:"count-select-ser"},d.length))),this.state.isToggleOn?React.createElement("div",{className:"cth-dropdown-options"},React.createElement("div",{className:"cth-dropdown-inner"},_)):null)),React.createElement("div",{className:"total-coast fl-wrap clearfix"},React.createElement("strong",null,_townhub_add_ons.i18n.book_ts),React.createElement("span",null,(0,w.price_format)(f))),React.createElement("div",{className:"booking-buttons"},React.createElement("button",{type:"button",onClick:this.checkAvailability,className:"btn-check-availability",disabled:!r},_townhub_add_ons.i18n.book_chev),React.createElement("button",{type:"button",onClick:this.onClickSubmit,className:"btn-book-now",disabled:!o},_townhub_add_ons.i18n.book_bn))),v)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.booking.checkingavai!==t.checkingavai?{booked:[],checkingavai:!1}:null}}]),r}();n.default=s(function(e){return{booking:e.booking}},function(t){return{checkAvailability:function(e){return t(r.checkAvailability(e))}}})(u)},{"../action/BookingActions":1,"../utils/helpers":12,"./CheckInOut":5,"./LoadingIndicator":6,"./RoomSelected":8}],4:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../action/BookingActions")),g=c(e("./RoomSelected")),k=c(e("./RoomPerson")),w=c(e("./CheckInOut")),R=c(e("./LoadingIndicator")),E=e("../utils/helpers");function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=ReactRedux.connect,u=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),n=null!=e.min_nights?e.min_nights:1,a=(0,E.getDate)(),o=(0,E.getDate)(null,n);return t.format="YYYY-MM-DD",t.bktype="rooms",t.price_based="per_night",t.min_nights=n,null!=t.props.format&&""!=t.props.format&&(t.format=t.props.format),null!=t.props.bktype&&""!=t.props.bktype&&(t.bktype=t.props.bktype),null!=t.props.price_based&&""!=t.props.price_based&&(t.price_based=t.props.price_based),t.state={adults:1,children:0,checkin:a,checkout:o,selected:[],selected_services:[],booked:[],bookable:!1,checkavailable:!0,checkingavai:!1,submit:!1},t.formRef=null,t.setFormRef=t.setFormRef.bind(t),t.checkAvailability=t.checkAvailability.bind(t),t.onSelectRoom=t.onSelectRoom.bind(t),t.getCheckInOut=t.getCheckInOut.bind(t),t.onChange=t.onChange.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t.onChangeRoomQtt=t.onChangeRoomQtt.bind(t),t.onSubmit=t.onSubmit.bind(t),t.onClickSubmit=t.onClickSubmit.bind(t),t.handleChange=t.handleChange.bind(t),t.handleClick=t.handleClick.bind(t),t.handleAvaiCalEvent=t.handleAvaiCalEvent.bind(t),t.onchangePersonQtt=t.onchangePersonQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,React.Component),o(r,[{key:"componentDidMount",value:function(){window.addEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"handleAvaiCalEvent",value:function(e){if(null!=e.detail){var t=e.detail,n=t.vals;t.metas;null!=n&&Array.isArray(n)&&2==n.length&&this.setState({checkin:this._formatOutDate(n[0]),checkout:this._formatOutDate(n[1]),checkavailable:!0,booked:[],bookable:!1})}}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",o="";return null!=e&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),o=e.substr(6,2),1==t?n+"-"+a+"-"+o:this.format.replace("YYYY",n).replace("MM",a).replace("DD",o)):""}},{key:"_renderCusHtml",value:function(){var e=document.getElementById("tmpl-custom-get-field").innerHTML;return""!=e&&React.createElement("div",{className:"cus-field-bk-content",dangerouslySetInnerHTML:{__html:e}})}},{key:"setFormRef",value:function(e){this.formRef=e}},{key:"checkAvailability",value:function(e){this.setState({bookable:!1,checkavailable:!1,checkingavai:!0}),this.props.checkAvailability(this.state)}},{key:"onChange",value:function(e,t){var n;this.setState((l(n={},t,e.target.value),l(n,"checkavailable",!0),n))}},{key:"handleChange",value:function(t,e){var n=e.target.value,a=this.state.selected_services,o=a.findIndex(function(e){return e.id==t});-1!==o?a.splice(o,1):a.push({id:t,price:n,qtt:1}),this.setState({selected_services:a})}},{key:"handleClick",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"getCheckInOut",value:function(e){Array.isArray(e)&&2==e.length&&this.setState({checkin:e[0],checkout:e[1],checkavailable:!0})}},{key:"onClickQtt",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",n=arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e3,r=this.state[n];"down"==t&&a<r?--r:"up"==t&&r<o&&++r,this.setState((l(e={},n,r),l(e,"checkavailable",!0),e))}},{key:"onChangeRoomQtt",value:function(e,t,n){var a=this.state,o=a.booked,r=a.bookable;if(Array.isArray(o)){var i=o.findIndex(function(e){return e.id==t}),c=n.min_adults;(null==c||c<0)&&(c=1),-1!==i?0<e&&c<=e?o[i]={id:t,qtt:e}:o.splice(i,1):0<e&&c<=e&&o.push({id:t,qtt:e}),r=0<o.length}this.setState({booked:o,bookable:r})}},{key:"onchangePersonQtt",value:function(e,t,n){var a=this.state,o=a.booked,r=a.bookable;if(Array.isArray(o)){var i=o.findIndex(function(e){return e.id==t}),c=e.qtt,l=e.adults,s=e.children,u=e.infant,d=n.min_adults;(null==d||d<0)&&(d=1),-1!==i?0<l+s+u&&d<=l?o[i]={id:t,qtt:c,adults:l,children:s,infant:u}:o.splice(i,1):0<l+s+u&&d<=l&&o.push({id:t,qtt:c,adults:l,children:s,infant:u}),r=0<o.length}this.setState({booked:o,bookable:r})}},{key:"onSelectRoom",value:function(e){var t=e.target.value,n=this.state.selected;-1===n.indexOf(t)&&this.setState({selected:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t])})}},{key:"onClickSubmit",value:function(e){this.setState({submit:!0,bookable:!1,checkavailable:!1})}},{key:"onSubmit",value:function(e){this.state.submit||e.preventDefault()}},{key:"componentDidUpdate",value:function(e,t){this.state.submit&&this.formRef.submit()}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state,n=t.checkin,a=t.checkout,o=0;if(""!=n&&""!=a){var r=new Date(n),i=new Date(a);o=Math.floor((i-r)/864e5),1==e&&++o}return o}},{key:"render",value:function(){var i=this,c=this,e=this.props.booking,p=e.rooms,t=e.available,n=e.services,a=this.state,l=a.booked,f=(a.selected,a.submit),o=a.bookable,r=a.checkavailable,s=a.checkingavai,u=a.selected_services,d=a.checkin,b=a.checkout,h=[],_=0,m=1;null!=p&&p.length&&(Array.isArray(t)&&t.length&&t.forEach(function(t,e){if(0<parseInt(t.quantities)){var n=p.find(function(e){return e.id==t.id}),a=l.find(function(e){return e.id==t.id}),o=0;null!=a&&(o=a.qtt);var r=Object.assign({},n);r=Object.assign(r,t,{available:!0,qtt:o}),"per_night"===c.price_based?h.push(React.createElement(g.default,{rOrder:m,key:e,room:r,changeRoomQtt:i.onChangeRoomQtt})):h.push(React.createElement(k.default,{rOrder:m,key:e,room:r,changePersonQtt:i.onchangePersonQtt})),m++}}),0==h.length&&(h=React.createElement("div",null,"There is no available rooms. Please try with different days.")));var v=[];null!=n&&n.length&&n.forEach(function(t,e){var n=u.findIndex(function(e){return e.id==t.service_id});v.push(React.createElement("div",{key:e,className:"cth-dropdown-item lserv-dropdown"},React.createElement("input",{name:t.service_id,onChange:function(e){return i.handleChange(t.service_id,e)},type:"checkbox",value:t.service_price,defaultChecked:-1!==n,id:t.service_id}),React.createElement("label",{htmlFor:t.service_id},t.service_name,React.createElement("span",{className:"cth-dropdown-meta"},(0,E.price_format)(t.service_price)))))});var y=[];return Array.isArray(l)&&l.length&&(l.forEach(function(t,e){var n=p.find(function(e){return e.id==t.id}),a=n.price,o=n.children_price,r=n.infant_price,i=n.dPrices,c=(0,E.get_float_price)(a),l=(0,E.get_float_price)(o),s=(0,E.get_float_price)(r);for(var u in i)if(i[u].iso!=b){var d=(0,E.get_float_price)(i[u].price),h=(0,E.get_float_price)(i[u].children_price),m=(0,E.get_float_price)(i[u].infant_price);0<d?(_+=d*t.adults,f&&y.push(React.createElement("input",{key:"adults_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+i[u].iso+"][adults]",value:d,readOnly:!0}))):(_+=c*t.adults,f&&y.push(React.createElement("input",{key:"adults_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+i[u].iso+"][adults]",value:c,readOnly:!0}))),0<h?(_+=h*t.children,f&&y.push(React.createElement("input",{key:"children_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+i[u].iso+"][children]",value:h,readOnly:!0}))):(_+=l*t.children,f&&y.push(React.createElement("input",{key:"children_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+i[u].iso+"][children]",value:l,readOnly:!0}))),0<m?(_+=m*t.infant,f&&y.push(React.createElement("input",{key:"infant_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+i[u].iso+"][infant]",value:m,readOnly:!0}))):(_+=s*t.infant,f&&y.push(React.createElement("input",{key:"infant_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+i[u].iso+"][infant]",value:s,readOnly:!0})))}f&&(y.push(React.createElement("input",{key:"adults_"+e,type:"hidden",name:"rooms_new["+t.id+"][adults]",value:t.adults,readOnly:!0})),y.push(React.createElement("input",{key:"children_"+e,type:"hidden",name:"rooms_new["+t.id+"][children]",value:t.children,readOnly:!0})),y.push(React.createElement("input",{key:"infant_"+e,type:"hidden",name:"rooms_new["+t.id+"][infant]",value:t.infant,readOnly:!0})))}),f&&(u.forEach(function(e,t){var n="addservices["+t+"]";y.push(React.createElement("input",{key:"addservices_"+t,type:"hidden",name:n,value:e.id,readOnly:!0}))}),y.push(React.createElement("input",{key:"product_id",type:"hidden",name:"product_id",value:_townhub_add_ons.post_id,readOnly:!0})),y.push(React.createElement("input",{key:"esb_add_to_cart",type:"hidden",name:"action",value:"esb_add_to_cart",readOnly:!0})),y.push(React.createElement("input",{key:"booking_type",type:"hidden",name:"booking_type",value:c.bktype,readOnly:!0})),y.push(React.createElement("input",{key:"price_based",type:"hidden",name:"price_based",value:c.price_based,readOnly:!0}))),null!=u&&u.length&&u.forEach(function(e,t){_+=parseFloat(e.price)*parseFloat(e.qtt)})),React.createElement("form",{method:"post",className:"book-formsss custom-formsss",onSubmit:this.onSubmit,ref:this.setFormRef},React.createElement("fieldset",null,React.createElement("div",{className:"cal-item checkin-out-inputs"},React.createElement(w.default,{fieldName:"checkinout",fieldValue:[d,b],field:{label:_townhub_add_ons.i18n.book_dates,icon:"fal fa-calendar-check",format:this.format},getCheckInOut:this.getCheckInOut,min_nights:c.min_nights}),React.createElement("input",{type:"hidden",name:"checkout",value:b,readOnly:!0}),React.createElement("input",{type:"hidden",name:"checkin",value:d,readOnly:!0})),"per_night"===this.price_based&&React.createElement("div",{className:"cal-item guests-inputs"},React.createElement("div",{className:"qtt-item fl-wrap adults-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_ad),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"adults",min:"1",max:"10",step:"1",value:this.state.adults,onChange:function(e){return i.onChange(e,"adults")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return i.onClickQtt("up","adults",1,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return i.onClickQtt("down","adults",1,10)}},"-")))),React.createElement("div",{className:"qtt-item fl-wrap children-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_chi),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"children",min:"0",max:"10",step:"1",value:this.state.children,onChange:function(e){return i.onChange(e,"children")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return i.onClickQtt("up","children",0,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return i.onClickQtt("down","children",0,10)}},"-"))))),s?React.createElement(R.default,null):0<h.length&&React.createElement("div",{className:"cal-item available-rooms-services"},React.createElement("div",{className:"available-rooms"},React.createElement("label",null,_townhub_add_ons.i18n.book_avr),React.createElement("div",{className:"fl-wrap multiqtts-select-wrap rooms-items-wrap"},h)),0<n.length&&React.createElement("div",{className:"cth-dropdown-warp services-wrap"},React.createElement("div",{className:"cth-dropdown-header",onClick:this.handleClick},React.createElement("label",null,_townhub_add_ons.i18n.book_services,React.createElement("span",{className:"count-select-ser"},u.length))),this.state.isToggleOn?React.createElement("div",{className:"cth-dropdown-options"},React.createElement("div",{className:"cth-dropdown-inner"},v)):null)),React.createElement("div",{className:"total-coast fl-wrap clearfix"},React.createElement("strong",null,_townhub_add_ons.i18n.book_ts),React.createElement("span",null,(0,E.price_format)(_))),React.createElement("div",{className:"booking-buttons"},React.createElement("button",{type:"button",onClick:this.checkAvailability,className:"btn-check-availability",disabled:!r},_townhub_add_ons.i18n.book_chev),React.createElement("button",{type:"button",onClick:this.onClickSubmit,className:"btn-book-now",disabled:!o},_townhub_add_ons.i18n.book_bn))),y)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.booking.checkingavai!==t.checkingavai?{booked:[],checkingavai:!1}:null}}]),r}();n.default=s(function(e){return{booking:e.booking}},function(t){return{checkAvailability:function(e){return t(r.checkAvailability(e))}}})(u)},{"../action/BookingActions":1,"../utils/helpers":12,"./CheckInOut":5,"./LoadingIndicator":6,"./RoomPerson":7,"./RoomSelected":8}],5:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function c(e){l(this,c);var t=s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));t.fieldName="";var n=t.props,a=n.fieldName,o=n.fieldValue,r=n.field;null!=a&&(t.fieldName=a);var i=t.parseFieldValue(o);return t.state={vals:i,current:0,show_selector:!1},t.options={showing:1,max:12},t.format="YYYY-MM-DD",null!=r&&null!=r.format&&""!=r.format&&(t.format=r.format),t.wrapperRef=null,t.toggleDate=t.toggleDate.bind(t),t.switchMonth=t.switchMonth.bind(t),t.onFocusInput=t.onFocusInput.bind(t),t.setWrapperRef=t.setWrapperRef.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t.onClickApply=t.onClickApply.bind(t),t.onClickCancel=t.onClickCancel.bind(t),t}return i(c,React.Component),r(c,[{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside,!0)}},{key:"handleClickOutside",value:function(e){1==this.state.show_selector&&this.wrapperRef&&0==this.wrapperRef.contains(e.target)&&this.setState({show_selector:!1})}},{key:"parseFieldValue",value:function(e){var t=[];if(null!=e&&Array.isArray(e)&&2==e.length){var n=/-/gm;t=[e[0].replace(n,""),e[1].replace(n,"")]}return(t=t.filter(function(e,t,n){return n.indexOf(e)===t})).length<2&&(t=[]),t}},{key:"onFocusInput",value:function(e){this.setState({show_selector:!0})}},{key:"onClickCancel",value:function(){this.setState({vals:[],show_selector:!1}),this.props.getCheckInOut(["",""])}},{key:"onClickApply",value:function(){this.setState({show_selector:!1})}},{key:"switchMonth",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"next",t=this.options.max,n=this.state.current;"next"==e?n<t&&++n:0<n&&--n,this.setState({current:n})}},{key:"toggleDate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.state.vals;Array.isArray(n)&&(2<=n.length?n=[e]:1==n.length?t?n=[e]:n[0]<=e?n.push(e):n=[e]:n=[e],2==n.length?(this.props.getCheckInOut([this._formatOutDate(n[0]),this._formatOutDate(n[1])]),this.setState({show_selector:!1})):this.setState({vals:n}))}},{key:"_fieldClass",value:function(){var e="submit-field",t=this.state,n=t.vals,a=t.show_selector;return 2==n.length&&(e+=" ckinout-has-value"),1==a&&(e+=" show-selector"),e}},{key:"_renderFieldHeader",value:function(){var e=this.props.field;return React.createElement("div",{className:"lfield-header"},""!=e.icon&&React.createElement("span",{className:"lfield-icon"},React.createElement("i",{className:e.icon})),""!=e.label&&React.createElement("label",{className:"lfield-label",onClick:this.onFocusInput},e.label))}},{key:"_getMonthDatas",value:function(e){var t=this.state.vals;null!=e&&"function"==typeof e.getMonth||(e=new Date);var n=new Date,a=e.getFullYear(),o=e.getMonth(),r=this._getMonthNum(o),i=new Date(a,o,1),c=new Date(a,o+1,0),l=i.getDay(),s=c.getDate();n=new Date(n.getFullYear(),n.getMonth(),n.getDate());var u=[];if(0!==l)for(var d=0;d<l;d++)u.push({iso_date:"2018-12-16",date:0,status:"prev",time:"",selected:!1,first:!1,last:!1,inside:!1});for(var h=1;h<=s;h++){var m=new Date(a,o,h),p=this._getDateNum(h),f=""+a+r+p,b=a+"-"+r+"-"+p,_=!1,v=!1,y=!1,g=!1;2==t.length?(f==t[0]&&(v=_=!0),f==t[1]&&(y=_=!0),t[0]<f&&f<t[1]&&(g=!0)):1==t.length&&f==t[0]&&(v=_=!0);var k={iso_date:b,date:h,status:m<n?"past":"available",time:f,selected:_,first:v,last:y,inside:g};if(1===t.length&&null!=this.props.min_nights&&"available"==k.status){var w=parseInt(t[0]),R=parseInt(f),E=parseInt(this.props.min_nights);isNaN(w)||isNaN(R)||isNaN(E)||w<R&&this._getNightsDiff(R,w)<E&&(k.status="unavailable")}u.push(k)}return u}},{key:"_getMonthNum",value:function(e){return(e=parseInt(e)+1)<10?"0"+e:e}},{key:"_getDateNum",value:function(e){return e<10?"0"+e:e}},{key:"_renderDays",value:function(){var n=[];return _townhub_add_ons.i18n.days.forEach(function(e,t){return n.push(React.createElement(u,{key:t,day:e}))}),React.createElement("div",{className:"cal-days"},n)}},{key:"_getMonthString",value:function(e){null!=e&&"function"==typeof e.getMonth||(e=new Date);var t=e.getFullYear(),n=e.getMonth();return t+" "+_townhub_add_ons.i18n.months[n]}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",o="";return null!=(e=String(e))&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),o=e.substr(6,2),1==t?n+"-"+a+"-"+o:this.format.replace("YYYY",n).replace("MM",a).replace("DD",o)):""}},{key:"_renderStringValue",value:function(){var e=this.state.vals,t="";return 2==e.length&&(t+=this._formatOutDate(e[0],!1),t+=" -> ",t+=this._formatOutDate(e[1],!1)),t}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state.vals,n=0;if(2==t.length){var a=new Date(this._formatOutDate(t[0])),o=new Date(this._formatOutDate(t[1]));n=Math.floor((o-a)/864e5),1==e&&++n}return n}},{key:"_getNightsDiff",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=0,o=new Date(this._formatOutDate(e,!0)),r=new Date(this._formatOutDate(t,!0));return a=Math.floor((o-r)/864e5),1==n&&++a,a}},{key:"_renderMonthFooter",value:function(){return this.state.vals.length<2&&" disabled",React.createElement("div",{className:"cal-months-footer"},React.createElement("span",{className:"selected-date"},this._renderStringValue()),React.createElement("button",{className:"btn-cal-cancel",type:"button",onClick:this.onClickCancel},_townhub_add_ons.i18n.checkout_can))}},{key:"_renderSelector",value:function(){var c=this,e=this.options,t=e.showing,n=e.max,l=this.state.current,a="cal-month-nav month-next",o="cal-month-nav month-prev";l<=0&&(o+=" month-disabled"),n<=l&&(a+=" month-disabled");for(var r=React.createElement("article",{className:"cal-months-header"},React.createElement("div",{className:o,onClick:function(e){return c.switchMonth("prev")}},React.createElement("span",null)),React.createElement("div",{className:a,onClick:function(e){return c.switchMonth("next")}},React.createElement("span",null))),s=[],i=function(e){var t=new Date,n=t.getFullYear(),a=t.getMonth(),o=new Date(n,a+l+e,1),r=c._getMonthDatas(o),i=[];r.forEach(function(e,t){return i.push(React.createElement(h,{key:t,date:e,toggleDate:c.toggleDate}))}),s.push(React.createElement("div",{key:e,className:"cal-month"},React.createElement("div",{className:"cal-month-header"},React.createElement("div",{className:"cal-month-string"},c._getMonthString(o))),React.createElement("div",{className:"cal-dates-wrap"},c._renderDays(),React.createElement("div",{className:"cal-dates"},i))))},u=0;u<t;u++)i(u);var d="cal-months-wrap months-"+this.options.showing;return React.createElement("div",{className:"lfield-content checkinout-field"},React.createElement("div",{className:d},r,s,this._renderMonthFooter()))}},{key:"render",value:function(){var e=this.options;e.showing,e.max,this.state.current;return React.createElement("div",{className:this._fieldClass(),ref:this.setWrapperRef},null!=this.props.field&&this._renderFieldHeader(),React.createElement("input",{type:"text",className:"in-out-dates",value:this._renderStringValue(),readOnly:!0,onFocus:this.onFocusInput}),React.createElement("div",{className:"in-out-count"},React.createElement("i",{className:"fa fa-question-circle"}),React.createElement("span",null,_townhub_add_ons.i18n.nights," : ",React.createElement("strong",null,this._getDatesDiff(!1)))),1==this.state.show_selector&&this._renderSelector())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.vals,a=e.fieldValue;if(2===a.length){var o=a[0].replace(/-/gm,""),r=a[1].replace(/-/gm,"");if(2===n.length&&(o!=n[0]||r!=n[1]))return{vals:[o,r]};if(0===n.length&&""!=o&&""!=r)return{vals:[o,r]}}return null}}]),c}();n.default=c;var h=function(e){function n(e){l(this,n);var t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onToggle=t.onToggle.bind(t),t}return i(n,React.Component),r(n,[{key:"onToggle",value:function(e){var t=this.props.date,n=t.time,a=t.status,o=t.selected;"available"===a&&this.props.toggleDate(n,o)}},{key:"render",value:function(){var e=this.props.date,t=e.status,n=e.date,a="cal-date";return a+="prev"===t?" cal-date-diff":"past"===t?" cal-date-past":"unavailable"===t?" cal-date-unavailable":" cal-date-available",e.selected&&(a+=" cal-date-checked"),e.first&&(a+=" cal-date-cfirst"),e.last&&(a+=" cal-date-clast"),e.inside&&(a+=" cal-date-inside"),React.createElement("div",{className:a,onClick:this.onToggle},"prev"!=t&&React.createElement("span",null,n))}}]),n}(),u=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,React.Component),r(t,[{key:"render",value:function(){var e=this.props.day;return React.createElement("div",{className:"cal-day"},e)}}]),t}()},{}],6:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"render",value:function(){var e="loading-indicator";return null!=this.props.class&&(e+=" "+this.props.class),React.createElement("div",{className:e},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))}}]),t}();n.default=i},{}],7:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),u=e("../utils/helpers");var o=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),n=t.props.room;t.state={qtt:n.qtt,adults:0,children:0,infant:0};var a=5;return parseInt(n.quantities)<a&&(a=parseInt(n.quantities)),t.max_qtt=a,t.onChangeQtt=t.onChangeQtt.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,React.Component),i(o,[{key:"onChangeQtt",value:function(e,t){this.handleQttChange(t,e.target.value)}},{key:"handleQttChange",value:function(e,t){var n=this.props.room,a=n.id,o=n.available,r=this.state;0<=t&&(r[e]=t,this.setState(r),o&&this.props.changePersonQtt(r,a,this.props.room))}},{key:"onClickQtt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"up",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e3,o=0;null!=this.state[e]&&(o=this.state[e]),"down"==t&&n<o?--o:"up"==t&&o<a&&++o,this.handleQttChange(e,o)}},{key:"render",value:function(){var t=this,e=this.props.room,n=(e.id,e.adults),a=e.children,o=e.title,r=(e.quantities,e.available),i=e.price,c=e.children_price,l=this.props.rOrder,s=parseInt(n)+parseInt(a);return React.createElement("div",{className:"multiqtts-select_item bkroom_new-item"},React.createElement("div",{className:null!=l&&1===l?"multiqtts-select_header vis-multiqtt_select fl-wrap":"multiqtts-select_header fl-wrap"},o,React.createElement("span",{className:"available_counter green-bg"},s),React.createElement("i",{className:"fal fa-plus"})),r&&React.createElement("div",{className:null!=l&&1===l?"custom-tour-quantities multiqtts-select_content vis-multiqtt_select_cont":"custom-tour-quantities multiqtts-select_content"},React.createElement("div",{className:"qtt-item qtt-item-full"},React.createElement("div",{className:"qtt-label-wrap"},_townhub_add_ons.i18n.adults),React.createElement("div",{className:"qtt-price text-right"},(0,u.price_format)(i)," x "),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",className:"tour-quantity-input",min:"0",step:"1",max:parseInt(n),value:this.state.adults,readOnly:!0,onChange:function(e){return t.onChangeQtt(e,"adults")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return t.onClickQtt("adults","up",0,parseInt(n))}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return t.onClickQtt("adults","down",0,parseInt(n))}},"-")))),React.createElement("div",{className:"qtt-item qtt-item-full mt-10"},React.createElement("div",{className:"qtt-label-wrap"},_townhub_add_ons.i18n.children),React.createElement("div",{className:"qtt-price text-right"},(0,u.price_format)(c)," x "),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",className:"tour-quantity-input",min:"0",step:"1",max:parseInt(a),value:this.state.children,readOnly:!0,onChange:function(e){return t.onChangeQtt(e,"children")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return t.onClickQtt("children","up",0,parseInt(a))}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return t.onClickQtt("children","down",0,parseInt(a))}},"-"))))))}}]),o}();n.default=o},{"../utils/helpers":12}],8:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var o=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),n=t.props.room;t.state={qtt:n.qtt};var a=5;return parseInt(n.quantities)<a&&(a=parseInt(n.quantities)),t.max_qtt=a,t.onChangeQtt=t.onChangeQtt.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,React.Component),i(o,[{key:"onChangeQtt",value:function(e){this.handleQttChange(e.target.value)}},{key:"handleQttChange",value:function(e){var t=this.props.room,n=t.id,a=t.available;0<=e&&(this.setState({qtt:e}),a&&this.props.changeRoomQtt(e,n,this.props.room))}},{key:"onClickQtt",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,a=this.state.qtt;"down"==e&&t<a?--a:"up"==e&&a<n&&++a,this.handleQttChange(a)}},{key:"render",value:function(){var t=this,e=(this.props.room,this.props.room),n=(e.id,e.adults),a=e.children,o=e.title,r=e.quantities,i=e.available,c=(e.price,e.children_price,parseInt(n),parseInt(a),this.props.rOrder);return React.createElement("div",{className:"multiqtts-select_item bkroom-item"},React.createElement("div",{className:null!=c&&1===c?"multiqtts-select_header vis-multiqtt_select fl-wrap":"multiqtts-select_header fl-wrap"},o,React.createElement("span",{className:"available_counter green-bg"},r),React.createElement("i",{className:"fal fa-plus"})),i&&React.createElement("div",{className:null!=c&&1===c?"custom-tour-quantities multiqtts-select_content vis-multiqtt_select_cont":"custom-tour-quantities multiqtts-select_content"},React.createElement("div",{className:"qtt-item qtt-item-full"},React.createElement("div",{className:"qtt-label-wrap"},_townhub_add_ons.i18n.roomsl_quan),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",className:"tour-quantity-input",min:"0",step:"1",max:this.max_qtt,value:this.state.qtt,readOnly:!0,onChange:this.onChangeQtt}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return t.onClickQtt("up",0,t.max_qtt)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return t.onClickQtt("down",0,t.max_qtt)}},"-"))))))}}]),o}();n.default=o},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.default.booking,t=arguments[1];switch(t.type){case i.CHECK_AVAILABILITY_START:return Object.assign({},e,{checkingavai:!0});case i.CHECK_AVAILABILITY_SUCCESS:return Object.assign({},e,{rooms:t.data.rooms,available:t.data.available,services:t.data.add_services,checkingavai:!1});default:return e}};var a,o=e("./initialState"),r=(a=o)&&a.__esModule?a:{default:a},i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../action/actionTypes"))},{"../action/actionTypes":2,"./initialState":11}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,o=e("./Booking"),r=(a=o)&&a.__esModule?a:{default:a};var i=Redux.combineReducers;n.default=i({booking:r.default})},{"./Booking":9}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={booking:{rooms:[],available:[],services:[],checkingavai:!1}}},{}],12:[function(e,t,n){"use strict";function c(e){return(e=parseInt(e)+1)<10?"0"+e:e}function l(e){return e<10?"0"+e:e}function o(e){return e=parseFloat(e),isNaN(e)&&(e=0),e}Object.defineProperty(n,"__esModule",{value:!0}),n.getDate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";e=null==e||""==e?new Date:new Date(e);"function"!=typeof e.getMonth&&(e=new Date);var a=e.getDate();null==t||isNaN(parseInt(t))||(a+=parseInt(t),e.setDate(a));a=e.getDate();var o=e.getFullYear(),r=c(e.getMonth()),i=l(a);return""!=n?n.replace(/YYYY/g,o).replace(/MM/g,r).replace(/DD/g,i):e.toString()},n.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},n.price_to_usd=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e=o(e),null!=_townhub_add_ons.currency?(e=(e+"").replace(new RegExp("."==_townhub_add_ons.currency.ths_sep?"\\.":_townhub_add_ons.currency.ths_sep,"g"),"").replace(_townhub_add_ons.currency.dec_sep,"."),e=parseFloat(e)/parseFloat(_townhub_add_ons.currency.rate),t&&("left"==_townhub_add_ons.currency.sb_pos?e=_townhub_add_ons.currency.symbol+e:e+=_townhub_add_ons.currency.symbol)):t&&(e=_townhub_add_ons.base_currency.symbol+e);return e},n.price_format=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e=o(e),null!=_townhub_add_ons.currency){e=parseFloat(e)*parseFloat(_townhub_add_ons.currency.rate);var n=parseInt(_townhub_add_ons.currency.decimal);if(0<n){var a=new RegExp("."==_townhub_add_ons.currency.dec_sep?"(\\d)(?=(\\d{3})+\\.)":"(\\d)(?=(\\d{3})+"+_townhub_add_ons.currency.dec_sep+")","g");e=e.toFixed(n).replace(".",_townhub_add_ons.currency.dec_sep).replace(a,"$1"+_townhub_add_ons.currency.ths_sep)}else e=(parseInt(e)+"").replace(/(\d)(?=(\d{3})+$)/g,"$1"+_townhub_add_ons.currency.ths_sep);t&&("left"==_townhub_add_ons.currency.sb_pos?e=_townhub_add_ons.currency.symbol+e:"left_space"==_townhub_add_ons.currency.sb_pos?e=_townhub_add_ons.currency.symbol+" "+e:"right_space"==_townhub_add_ons.currency.sb_pos?e+=" "+_townhub_add_ons.currency.symbol:e+=_townhub_add_ons.currency.symbol)}else t&&(e=_townhub_add_ons.currency.symbol+e);return e},n.base_price_format=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e=o(e),null!=_townhub_add_ons.base_currency){e=parseFloat(e)*parseFloat(_townhub_add_ons.base_currency.rate);var n=parseInt(_townhub_add_ons.base_currency.decimal);if(0<n){var a=new RegExp("."==_townhub_add_ons.base_currency.dec_sep?"(\\d)(?=(\\d{3})+\\.)":"(\\d)(?=(\\d{3})+"+_townhub_add_ons.base_currency.dec_sep+")","g");e=e.toFixed(n).replace(".",_townhub_add_ons.base_currency.dec_sep).replace(a,"$1"+_townhub_add_ons.base_currency.ths_sep)}else e=(parseInt(e)+"").replace(/(\d)(?=(\d{3})+$)/g,"$1"+_townhub_add_ons.base_currency.ths_sep);t&&("left"==_townhub_add_ons.base_currency.sb_pos?e=_townhub_add_ons.base_currency.symbol+e:"left_space"==_townhub_add_ons.base_currency.sb_pos?e=_townhub_add_ons.base_currency.symbol+" "+e:"right_space"==_townhub_add_ons.base_currency.sb_pos?e+=" "+_townhub_add_ons.base_currency.symbol:e+=_townhub_add_ons.base_currency.symbol)}return e},n.currency_symbol=function(){return null!=_townhub_add_ons.currency&&null!=_townhub_add_ons.currency.symbol?_townhub_add_ons.currency.symbol:_townhub_add_ons.base_currency.symbol},n.getWithdrawalDate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";e=null==e||""==e?new Date:new Date(e);"function"!=typeof e.getMonth&&(e=new Date);if(e.getDate()>t){var a=e.getMonth();e.setMonth(a+1,t)}else e.setDate(t);var o=e.getFullYear(),r=c(e.getMonth()),i=l(t);return""!=n?n.replace(/YYYY/g,o).replace(/MM/g,r).replace(/DD/g,i):e.toString()},n.get_float_price=o},{}],13:[function(e,t,n){"use strict";var a=i(e("./bookingsrc/components/BookingForm")),o=i(e("./bookingsrc/components/BookingFormNew")),r=i(e("./bookingsrc/reducers"));function i(e){return e&&e.__esModule?e:{default:e}}var c=ReactRedux.Provider,l=Redux,s=l.createStore,u=l.applyMiddleware,d=s(r.default,u(ReduxThunk.default)),h=document.querySelector("#bookingform-app");if(null!=h){var m="",p=1;h.hasAttribute("data-format")&&(m=h.getAttribute("data-format")),h.hasAttribute("min_nights")&&(p=h.getAttribute("min_nights")),ReactDOM.render(React.createElement(c,{store:d},React.createElement(a.default,{format:m,min_nights:p})),h)}var f=document.getElementById("bookingrooms-app");if(null!=f){var b="",_="per_night",v=1;f.hasAttribute("data-format")&&(b=f.getAttribute("data-format")),f.hasAttribute("price_based")&&(_=f.getAttribute("price_based")),f.hasAttribute("min_nights")&&(v=f.getAttribute("min_nights")),ReactDOM.render(React.createElement(c,{store:d},React.createElement(o.default,{format:b,price_based:_,bktype:"rooms_new",min_nights:v})),f)}},{"./bookingsrc/components/BookingForm":3,"./bookingsrc/components/BookingFormNew":4,"./bookingsrc/reducers":10}]},{},[13]);